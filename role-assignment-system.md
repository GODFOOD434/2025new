# 角色分配系统设计

## 1. 角色定义

### 1.1 基本角色
- 系统管理员：负责系统配置和用户管理
- 中心领导：查看全局数据和审批特殊情况
- 生产组长：管理生产组员工、处理特殊情况、协调各组工作
- 生产组员工：处理采购订单确认和打印确认单
- 保管组长：管理保管员、协调库位分配、处理特殊情况
- 保管员：负责确认物资入库、出库、判断是否直达用户单位和库存管理
- 质检组长：管理质检员、处理质量异常、维护质量标准
- 质检员：负责物资质量检验
- 用户单位联系人：确认直达物资

### 1.2 角色权限矩阵

| 功能模块 | 系统管理员 | 中心领导 | 生产组长 | 生产组员工 | 保管组长 | 保管员 | 质检组长 | 质检员 | 用户单位联系人 |
|---------|-----------|---------|-----------|-----------|-----------|--------|-----------|--------|--------------|
| 系统管理 | ✓ | - | - | - | - | - | - | - | - |
| 数据看板 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | - |
| 采购订单导入 | ✓ | - | ✓ | ✓ | - | - | - | - | - |
| 工作流发起 | ✓ | - | ✓ | ✓ | - | - | - | - | - |
| 工作流特殊情况处理 | ✓ | ✓ | ✓ | - | ✓ | - | ✓ | - | - |
| 保管确认 | - | - | - | - | - | ✓ | - | - | - |
| 质检确认 | - | - | - | - | - | - | - | ✓ | - |
| 直达判断 | - | - | - | - | - | ✓ | - | - | - |
| 直达确认 | - | - | - | - | - | - | - | - | ✓ |
| 确认单打印 | ✓ | - | ✓ | ✓ | - | - | - | - | - |
| 入库管理 | ✓ | - | - | - | ✓ | ✓ | - | - | - |
| 出库管理 | ✓ | - | - | - | ✓ | ✓ | - | - | - |
| 任务分配 | ✓ | - | ✓ | - | ✓ | - | ✓ | - | - |
| 报表导出 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | - |

## 2. 分工规则设计

### 2.1 保管员分配规则
- 按大类分配：每个保管员负责特定的物资大类
- 按用户单位分配：每个保管员负责特定用户单位的物资
- 混合分配：按大类和用户单位的组合进行分配

### 2.2 质检员分配规则
- 按大类分配：每个质检员负责特定的物资大类
- 按用户单位分配：每个保管员负责特定用户单位的物资
- 混合分配：按大类和用户单位的组合进行分配


### 2.3 分配配置界面
系统提供配置界面，允许管理员设置：
- 保管员负责的大类和用户单位
- 质检员负责的大类和专业领域
- 分配规则的优先级
- 特殊物资的指定处理人

## 3. 动态任务分配流程

### 3.1 工作流启动时分配
1. 生产组员工发起工作流
2. 系统读取采购订单的大类和用户单位信息
3. 查询分配规则表，确定符合条件的保管员和质检员
4. 如有多人符合条件，按工作量均衡原则选择
5. 将任务分配给选中的保管员和质检员
6. 发送通知给相关人员，包括生产组长、保管组长和质检组长

### 3.2 人员变更处理
1. 当保管员或质检员请假、离职时，相应的组长可临时调整分配规则
2. 系统支持任务转交功能，允许组长将已分配任务转给其他人员
3. 对于长期未处理的任务，系统自动提醒相应组长重新分配

### 3.3 应急处理机制
1. 当无法找到符合条件的处理人时，任务上报给相应的组长
2. 组长可手动指定处理人，或在特殊情况下上报给管理员
3. 系统记录特殊分配情况，作为规则优化依据

## 4. 组长管理职责

### 4.1 生产组长职责
- 管理生产组员工的日常工作
- 处理工作流中的特殊情况和异常
- 监督确认单打印和交付
- 协调生产组与保管组、质检组的工作
- 统计分析生产组工作情况

### 4.2 保管组长职责
- 管理保管员的日常工作
- 协调库位分配和库存管理
- 处理直达判断中的特殊情况
- 监督入库、出库操作和库存安全
- 统计分析保管组工作情况

### 4.3 质检组长职责
- 管理质检员的日常工作
- 处理质量异常和不合格情况
- 协调复杂物资的质量检验
- 维护质量标准和规范
- 统计分析质检组工作情况
