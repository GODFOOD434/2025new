# 仓储工作流系统

## 概述

本项目是一个基于 Python 技术栈实现的仓储工作流系统，旨在管理从采购订单确认到质检、仓储及出库的完整流程。系统通过自动化工作流、精准的任务分配和清晰的角色职责，提高仓储管理效率。

## 主要功能

*   **采购订单管理**: 支持从 ERP 系统导入采购订单 Excel 文件，并进行处理。
*   **自动化工作流**:
    *   根据物料大类和用户单位自动将任务分配给相应的保管员和质检员。
    *   处理物资直达用户单位或入中心仓储的不同流程分支。
    *   包含采购订单确认、质检确认、出库等核心流程。
*   **Excel 处理**: 实现采购订单和出库数据的 Excel 文件导入、验证和处理。
*   **确认单生成**: 生产组员工可根据流程结果生成并打印纸质确认单。
*   **数据看板**: 为不同层级（中心领导、组长）提供可视化数据监控界面。
*   **角色与权限管理**:
    *   明确定义生产组、保管组、质检组等角色及其职责。
    *   支持组长管理各自团队。
*   **API 接口**: 提供标准的 RESTful API 用于系统集成和功能调用。
*   **消息通知**: 通过系统内部、邮件等方式向相关角色发送任务和状态通知。

## 技术栈

*   **后端**: Python 3.x, FastAPI
*   **数据库**: PostgreSQL (或其他关系型数据库)
*   **数据处理**:
    * Python < 3.13: Pandas
    * Python >= 3.13: Polars (由于 Pandas 与 Python 3.13 的兼容性问题)
*   **工作流**: FastAPI 内建逻辑 / Prefect (待定)
*   **前端**: Vue.js 3, Element Plus
*   **部署**: Docker

## 角色与职责

*   **生产组**:
    *   **组长**: 管理团队、协调工作。
    *   **员工**: 处理采购订单导入、发起工作流、打印确认单。
*   **保管组**:
    *   **组长**: 管理团队、协调库位。
    *   **保管员**: 确认收货、判断直达/入库、执行出入库操作、管理库存、处理出库 Excel 导入。
*   **质检组**:
    *   **组长**: 管理团队、处理质量异常。
    *   **质检员**: 执行物资质量检验。
*   **其他**: 系统管理员、中心领导、用户单位联系人。

## 项目结构

- `frontend/`：前端代码，使用 Vue.js 开发
- `backend/`：后端代码，使用 FastAPI 开发

## 运行与开发

### 后端

#### 自动安装（推荐）

1. 进入后端目录：

```bash
cd backend
```

2. 运行安装脚本：

```bash
# Windows
install.bat

# Linux/Mac
chmod +x install.sh
./install.sh
```

#### 手动安装

1. 进入后端目录：

```bash
cd backend
```

2. 创建虚拟环境：

```bash
python -m venv venv
```

3. 激活虚拟环境：

```bash
# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

4. 安装依赖：

```bash
pip install -e .
```

> 注意：对于 Python 3.13 用户，我们使用 polars 替代 pandas，因为 pandas 与 Python 3.13 的兼容性存在问题。这种替换对应用程序的功能没有影响，因为我们已经封装了相关的数据处理函数。

5. 运行后端：

```bash
python run.py
```

后端服务器将在 http://localhost:8000 上运行。

### 前端

1. 进入前端目录：

```bash
cd frontend
```

2. 安装依赖：

```bash
npm install
```

3. 运行前端：

```bash
npm run serve
```

前端服务器将在 http://localhost:8080 上运行。

## 后续计划与优化建议

*   移动端支持 (App/小程序)
*   与 ERP 系统实现更深度的双向数据集成
*   引入基于历史数据的智能推荐 (如库位推荐)
*   支持条码/RFID扫描进行物资管理
*   增加组长绩效分析功能模块
*   完善自动化测试覆盖
*   优化数据库查询性能
*   前端用户体验改进